<div class="bg-white pb-6 rounded-b-lg">
  <magma-shared-title></magma-shared-title>
</div>

<section class="bg-white rounded-md mt-2">
  <nz-tabset>
    <nz-tab nzTitle="Dados Gerais">
      <form nz-form [formGroup]="form" nzLayout="vertical" (ngSubmit)="salvar()" class="mt-2">
        <div class="px-4 py-3">
          <div nz-row nzGutter="24">
            <div nz-col nzXs="24" nzSm="24" nzMd="12" nzLg="12" nzXl="12">
              <nz-form-item>
                <nz-form-label nzRequired>Nome</nz-form-label>
                <nz-form-control>
                  <input nz-input formControlName="nome" placeholder="Nome da disciplina" />
                </nz-form-control>
              </nz-form-item>
            </div>
            <div nz-col nzXs="24" nzSm="24" nzMd="12" nzLg="12" nzXl="12">
              <nz-form-item>
                <nz-form-label nzRequired>C칩digo</nz-form-label>
                <nz-form-control>
                  <input nz-input formControlName="codigo" placeholder="C칩digo da disciplina" />
                </nz-form-control>
              </nz-form-item>
            </div>
          </div>
          <div nz-row nzGutter="24">
            <div nz-col nzXs="24" nzSm="24" nzMd="12" nzLg="12" nzXl="12">
              <nz-form-item>
                <nz-form-label nzRequired>Carga Hor치ria</nz-form-label>
                <nz-form-control>
                  <nz-input-number formControlName="cargaHoraria" [nzMin]="1" [nzMax]="1000"
                                   nzPlaceHolder="Carga hor치ria em horas" style="width: 100%"></nz-input-number>
                </nz-form-control>
              </nz-form-item>
            </div>
            <div nz-col nzXs="24" nzSm="24" nzMd="12" nzLg="12" nzXl="12">
              <nz-form-item>
                <nz-form-label nzRequired>Curso</nz-form-label>
                <nz-form-control>
                  <nz-select formControlName="cursoId" nzPlaceHolder="Selecione um curso"
                             [nzLoading]="carregandoCursos" style="width: 100%">
                    <nz-option *ngFor="let curso of cursos" [nzValue]="curso.id" [nzLabel]="curso.nome"></nz-option>
                  </nz-select>
                </nz-form-control>
              </nz-form-item>
            </div>
          </div>
          <div nz-row nzGutter="24">
            <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="24" nzXl="24">
              <nz-form-item>
                <nz-form-label>Ementa</nz-form-label>
                <nz-form-control>
                  <textarea nz-input formControlName="ementa" nzAutosize placeholder="Ementa da disciplina"
                            [nzAutosize]="{ minRows: 3, maxRows: 6 }"></textarea>
                </nz-form-control>
              </nz-form-item>
            </div>
          </div>
        </div>
        <div class="flex justify-end px-4 py-4 space-x-2 bg-blue-50 rounded-b-lg border-t">
          <button type="submit" nz-button nzType="primary" [nzLoading]="salvandoDisciplina">
            {{ disciplinaId ? 'Salvar' : 'Cadastrar' }}
          </button>
        </div>
      </form>
    </nz-tab>

    @if(disciplinaId) {
      <nz-tab nzTitle="Turmas">
        <div class="px-4 py-3">
          <turma-listar [disciplinaId]="disciplinaId" [isTabelaRelacionada]="true"></turma-listar>
          </div>
      </nz-tab>
    }
  </nz-tabset>
</section>
